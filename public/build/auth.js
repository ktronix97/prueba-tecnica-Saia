import{a as l}from"./assets/api-XI3LJ71d.js";$(document).ready(function(){document.getElementById("login-form").addEventListener("submit",async o=>{o.preventDefault();const t=document.getElementById("email").value,r=document.getElementById("password").value;try{const{access_token:e,refresh_token:n}=await l.login(t,r);localStorage.setItem("access_token",e),console.log(atob(localStorage.getItem("access_token").split(".")[1])),localStorage.setItem("refresh_token",n),window.location.href="/dashboard"}catch(e){const n=e.response?.data?.error||e.message||"Error desconocido";alert(`Login fallido: ${n}`)}}),document.getElementById("register-form")?.addEventListener("submit",async o=>{o.preventDefault();const t={primerNombre:document.getElementById("primerNombre").value,segundoNombre:document.getElementById("segundoNombre").value,primerApellido:document.getElementById("primerApellido").value,segundoApellido:document.getElementById("segundoApellido").value,email:document.getElementById("email").value,password:document.getElementById("password").value,rol:document.getElementById("rol").value};try{await l.register(t),alert("Registro exitoso"),window.location.href="/login"}catch{alert("Error en el registro")}}),$("#logout").on("click",function(){localStorage.clear(),window.location.href="/login"})});
